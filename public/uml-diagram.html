const img = document.createElement('img');
        img.src = staticImageUrl;
        img.alt = 'Diagramme UML';
        img.style.maxWidth = '100%';
        
        // Gérer le chargement de l'image
        img.onload = function() {
          loadingElement.style.display = 'none';
          // Vider le conteneur au cas où
          while (diagramElement.firstChild) {
            diagramElement.removeChild(diagramElement.firstChild);
          }
          diagramElement.appendChild(img);
        };
        
        // Gérer les erreurs de chargement
        img.onerror = function() {
          loadingElement.style.display = 'none';
          errorElement.style.display = 'block';
        };

        // Mettre à jour le lien direct
        directLinkUrlElement.href = staticImageUrl;
        directLinkElement.style.display = 'block';
      }

      // Essayer d'abord la méthode directe, puis les alternatives si nécessaire
      try {
        // Créer une image directement à partir du service PlantUML en ligne
        const directUrl = 'https://www.plantuml.com/plantuml/svg/SoWkIImgAStDuU8goIp9ILLmJyrBBKh9J4irBmBLjLFmp4lCIqkB2CdFJIqkuGBAAUW2rO0Kl9ISrEZKW2m9LT3LjR4qTJKAHJW0hWa0';
        
        const img = document.createElement('img');
        img.src = directUrl;
        img.alt = 'Diagramme UML';
        img.style.maxWidth = '100%';
        
        // Gérer le chargement de l'image
        img.onload = function() {
          loadingElement.style.display = 'none';
          diagramElement.appendChild(img);
          
          // Mettre à jour le lien direct
          directLinkUrlElement.href = directUrl;
          directLinkElement.style.display = 'block';
        };
        
        // Gérer les erreurs de chargement
        img.onerror = function() {
          // Si l'image directe ne se charge pas, essayer la méthode alternative
          generateDiagram();
        };
      } catch (error) {
        console.error("Erreur lors du chargement direct du diagramme:", error);
        generateDiagram();
      }
    });
  </script>
</body>
</html>